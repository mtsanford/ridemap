<?php
if (isset($routeID)) {
	$setzoom = "Admin.rideMap.zoomToRouteID({$routeID});";
} else {
	$setzoom = "";
}

$html = <<<EOD
<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title>Ridemap - Admin</title>
	<script src="//maps.googleapis.com/maps/api/js?libraries=geometry&sensor=false" type="text/javascript"></script>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="../js/ridemap.js" type="text/javascript"></script>
    <link href="../css/ridemap.css" rel="stylesheet" type="text/css"/>
    <link href="../css/ridemapadmin.css" rel="stylesheet" type="text/css"/>
    <script type="text/javascript">

	var Admin = {
		rideMap : null,
		initialize : function() {
		  Admin.rideMap = new Ridemap('map_canvas', {mode: 'admin'});
		  {$setzoom}
		},
		newRoute : function() {
			window.location='?id=new' + "&zoom=" 
				+ Admin.rideMap.map.getZoom().toString()
				+ "&lat=" + Admin.rideMap.map.getCenter().lat().toString() 
				+ '&lng=' + Admin.rideMap.map.getCenter().lng().toString();
		}
    };

    </script>

  </head>
  <body onload="Admin.initialize()" onunload="GUnload()">
  <table id="navtable"><tr>
  <td style="width:300px; height:100%">
	<div id="leftnav">
		<p>Click on a marker to view EDIT and DELETE options for a route</p>
		<p>Click 'New Route' to create a new route</p>
		<div style="margin:8px;"><input type="button" onclick="Admin.newRoute();" value="New Route"/></div>
		<p>Click 'Tag Routes' to use route tagging tool</p>
		<div style="margin:8px;"><input type="button" onclick="window.location='tag.php';" value="Tag Routes"/></div>
		{$logout_html}
	</div>
  </td>
  <td style="height:100%">
	<div id="map_canvas"></div>
  </td>
  </tr></table>
  </body>
</html>
EOD;
